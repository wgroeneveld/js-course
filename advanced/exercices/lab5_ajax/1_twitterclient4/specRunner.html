<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Jasmine Test Runner</title>
<link rel="stylesheet" type="text/css" href="./../../../lib/jasmine/jasmine.css">
<script type="text/javascript" src="./../../../lib/jasmine/jasmine.js"></script>
<script type="text/javascript" src="./../../../lib/jasmine/jasmine-jquery.js"></script>
<script type="text/javascript" src="./../../../lib/jasmine/jasmine-html.js"></script>

<script type="text/javascript" src="./../../../lib/jquery/jquery-1.7.js"></script>

<script type='text/javascript' src='twitter.js'></script>
<script type='text/javascript' src='utils.js'></script>
<script type='text/javascript' src='test.js'></script>
<link rel="stylesheet" href="./../../../lib/labs.css"></link>
<link rel="stylesheet" href="res/twitter.css"></link>
<script type="text/javascript" src="./../../../lib/testRunner.js"></script>

<script>
$(function() {
	var wall;
		
	$("#generateTweets").click(function() {
		if(!wall) {
			wall = Object.create(twitter);
		}
		
		wall.addTweets();
	});
});
</script>

</head>
<body>

<h2 class="onderwerp">
	Lab 1: Twitter client part IV - making the ajax call
</h2>


<div class="beschrijving">

<p>
Right, the final step, you're almost there: now we need to interprete JSON data and search via the actual twitter API. <br>
This is the URL you'll need to query: <a href="http://search.twitter.com/search.json" target="_blank">http://search.twitter.com/search.json</a><br>
See the <a href="https://dev.twitter.com/docs/using-search" target="_blank">Twitter Search API docs</a>.
</p>

<p>
We've given you "a" solution of the twitter exercice from lab 3. 
Everytime <em>addTweets()</em> is called, you can do a new query and see if some new tweets are uploaded on the wall. 
The threshold limit stays on 3. The JSON data you need to parse should contain the same keys as you've already implemented back in lab 1:

<pre class="code">
var tweet = {
	id // a unique number. The higher, the more recent it is.
	created_at,
	text,
	created_at,
	from_user
};
</pre>

Use there parameters to query the URL:

<pre class="code">
var data = {
	q: '#apple'	// something geeky and popular so you don't have to wait while testing
	since_id // optional, for filtering previous tweets,
	rpp: 3 // limits results
};
</pre>
</p>

<p>
<strong>Warning:</strong> the format is <em>JSONP</em>! Use The jQuery Ajax API accordinly.<br>
Remember you can use the Firebug NET tab to see which Ajax calls are active and you can use <em>console.dir()</em> to list what's inside your JSON object.
</p>

<p>
If you want, you can use <a href="https://github.com/pivotal/jasmine-ajax" target="_blank">https://github.com/pivotal/jasmine-ajax</a>. But jasmine's <em>spyOn()</em> is enough. 
</p>

</div>

<hr class="sep"/>

<form>
<input type="button" id="generateTweets" value="Refresh tweets!"></input>
</form>
<div id="twitterContainer">
</div>

<hr class="sep"/>

<h3>Unit tests</h3>

</body>
</html>

